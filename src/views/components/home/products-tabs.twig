{#
  Products Tabs Component
  عرض منتجات مع تبويبات (جديد، مميز، عروض)
#}

<section class="products-tabs-section py-16 bg-white" data-block-id="{{ block.id }}">
  <div class="container mx-auto px-4">
    {% if block.title %}
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
        {{ block.title }}
      </h2>
      {% if block.subtitle %}
      <p class="text-lg text-gray-600">{{ block.subtitle }}</p>
      {% endif %}
    </div>
    {% endif %}

    {# Tabs Navigation #}
    <div class="tabs-nav flex justify-center mb-8 border-b border-gray-200">
      <button 
        class="tab-button px-6 py-3 font-semibold text-gray-600 hover:text-primary-600 border-b-2 border-transparent hover:border-primary-600 transition-colors duration-300 active"
        data-tab="latest"
      >
        {{ trans('products.latest') }}
      </button>
      <button 
        class="tab-button px-6 py-3 font-semibold text-gray-600 hover:text-primary-600 border-b-2 border-transparent hover:border-primary-600 transition-colors duration-300"
        data-tab="featured"
      >
        {{ trans('products.featured') }}
      </button>
      <button 
        class="tab-button px-6 py-3 font-semibold text-gray-600 hover:text-primary-600 border-b-2 border-transparent hover:border-primary-600 transition-colors duration-300"
        data-tab="sale"
      >
        {{ trans('products.on_sale') }}
      </button>
    </div>

    {# Tabs Content #}
    <div class="tabs-content">
      {# Latest Products Tab #}
      <div class="tab-pane active" data-tab-content="latest">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {% for product in salla.products.latest(block.products_count|default(8)) %}
            {% include 'partials.product-card' with {product: product} %}
          {% endfor %}
        </div>
      </div>

      {# Featured Products Tab #}
      <div class="tab-pane hidden" data-tab-content="featured">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {% for product in salla.products.featured(block.products_count|default(8)) %}
            {% include 'partials.product-card' with {product: product} %}
          {% endfor %}
        </div>
      </div>

      {# Sale Products Tab #}
      <div class="tab-pane hidden" data-tab-content="sale">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          {% for product in salla.products.sale(block.products_count|default(8)) %}
            {% include 'partials.product-card' with {product: product} %}
          {% endfor %}
        </div>
      </div>
    </div>

    {% if block.show_more_button %}
    <div class="text-center mt-8">
      <a 
        href="{{ link('products') }}" 
        class="inline-block bg-primary-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-primary-700 transition-colors duration-300"
      >
        {{ trans('common.view_all_products') }}
      </a>
    </div>
    {% endif %}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabPanes = document.querySelectorAll('.tab-pane');

  tabButtons.forEach(button => {
    button.addEventListener('click', function() {
      const tabName = this.getAttribute('data-tab');

      // Remove active class from all buttons and panes
      tabButtons.forEach(btn => {
        btn.classList.remove('active', 'text-primary-600', 'border-primary-600');
        btn.classList.add('text-gray-600', 'border-transparent');
      });
      tabPanes.forEach(pane => pane.classList.add('hidden'));

      // Add active class to clicked button and corresponding pane
      this.classList.add('active', 'text-primary-600', 'border-primary-600');
      this.classList.remove('text-gray-600', 'border-transparent');
      document.querySelector(`[data-tab-content="${tabName}"]`).classList.remove('hidden');
    });
  });
});
</script>
